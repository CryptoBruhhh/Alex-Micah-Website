<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moonin' Prelaunch</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <header>
        <div class="logo"><a href="/">PRELAUNCH.MEME</a></div>
        <nav>
            <ul class="nav">
                <li><a href="dev.html">[Admin/Dev Tools]</a></li>
            </ul>
        </nav>
        <div class="login-info">
            <span id="auth-links">
                <!-- Links will be populated based on user login status -->
            </span>
            <!-- Make the image a link that will go to the user account page -->
            <a href="#" id="profileLink">
                <img src="profile-pic.jpg" alt="Profile Picture" id="profileIcon"> <!-- Default profile picture -->
            </a>
        </div>
    </header>

    <script>
        // Fetch user info from the server and update the login/logout links and profile icon
        fetch('/user-info')
            .then(response => response.json())
            .then(data => {
                const authLinks = document.getElementById('auth-links');
                const profileLink = document.getElementById('profileLink');
                const profileIcon = document.getElementById('profileIcon');
                
                if (data.username) {
                    authLinks.innerHTML = `
                        <span>Logged in as: ${data.username}</span>
                        &nbsp;&nbsp;<a href="#" onclick="document.getElementById('logout-form').submit();">[Logout]</a>
                        &nbsp;&nbsp;<a href="/account.html">[View account]</a>
                    `;
                    profileLink.setAttribute('href', '/account.html'); // Direct to the user account page
                    profileIcon.setAttribute('src', data.photoUrl || 'https://via.placeholder.com/40'); // Use userâ€™s profile picture or a placeholder
                } else {
                    authLinks.innerHTML = `
                        <a href="/login.html">[Login]</a>
                        &nbsp;&nbsp;<a href="/signup.html">[Create Account]</a>
                    `;
                    profileLink.setAttribute('href', '/login.html'); // Redirect to login if not logged in
                }
            })
            .catch(error => {
                console.error('Error fetching user info:', error);
            });
    </script>

    <form id="logout-form" action="/auth/logout" method="POST" style="display: none;"></form>

    <div class="main-content">
        <h1 style="text-align: center; margin-top: 20px;">Moonin'</h1>
        
        <div class="profile-info">
            <img src="profile-pic.jpg" alt="Profile Picture">
            <p><b>Coin Selected</b></p>
            <p><b>Created by: Username</b></p>
        </div>

        <div class="clock-timer">
            <p><b>00:00:00</b></p>
        </div>

        <div class="cyber-font">
            <a href="create-item.html">[CREATE A PRELAUNCH]</a>
        </div>
        

        <div class="search-bar">
            <button>Filter</button>
            <input type="text" placeholder="Search...">
        </div>

        <div class="listings">
            <div class="listing-item">
                <p>Coin Name</p>
                <img src="listing1.jpg" alt="Listing Image">
                <p>XX Minutes</p>
                <p>XX Members</p>
            </div>
            <div class="listing-item">
                <p>Coin Name</p>
                <img src="listing1.jpg" alt="Listing Image">
                <p>XX Minutes</p>
                <p>XX Members</p>
            </div>
            <div class="listing-item">
                <p>Coin Name</p>
                <img src="listing1.jpg" alt="Listing Image">
                <p>XX Minutes</p>
                <p>XX Members</p>
            </div>
            <div class="listing-item">
                <p>Coin Name</p>
                <img src="listing1.jpg" alt="Listing Image">
                <p>XX Minutes</p>
                <p>XX Members</p>
            </div>
        </div>
    </div>

</body>
</html>
